<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haiku Fishing</title>
    <link rel="stylesheet" href="styles.css">
    <style>body{background:#202020;}</style>
</head>
<body>
    <div class="container">
        <header class="header" id="titleBar">
            <div class="brand">
                <div class="title-group">
                    <h1>Haiku Fishing</h1>
                </div>
            </div>
            <div class="window-controls">
                <button class="window-btn" onclick="minimizeWindow()" title="Minimize">
                    <svg width="12" height="12" viewBox="0 0 12 12">
                        <path d="M0 6h12" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </button>
                <button class="window-btn" onclick="maximizeWindow()" title="Maximize">
                    <svg width="12" height="12" viewBox="0 0 12 12">
                        <rect x="1" y="1" width="10" height="10" stroke="currentColor" stroke-width="1" fill="none"/>
                    </svg>
                </button>
                <button class="window-btn close-btn" onclick="closeWindow()" title="Close">
                    <svg width="12" height="12" viewBox="0 0 12 12">
                        <path d="M1 1l10 10M11 1L1 11" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </button>
            </div>
        </header>

        <div class="main-content">
            <nav class="sidebar">
                <div class="nav-item active" data-view="dashboard">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    Main
                </div>
                <div class="nav-item" data-view="controls">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                        <line x1="18" y1="20" x2="18" y2="10"/>
                        <line x1="12" y1="20" x2="12" y2="4"/>
                        <line x1="6" y1="20" x2="6" y2="14"/>
                    </svg>
                    Controls
                </div>
                <div class="nav-item" data-view="fishing">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                    Discord Webhook
                </div>
                <div class="nav-item" data-view="advanced">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                        <line x1="4" y1="21" x2="4" y2="14"/>
                        <line x1="4" y1="10" x2="4" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="12"/>
                        <line x1="12" y1="8" x2="12" y2="3"/>
                        <line x1="20" y1="21" x2="20" y2="16"/>
                        <line x1="20" y1="12" x2="20" y2="3"/>
                        <line x1="1" y1="14" x2="7" y2="14"/>
                        <line x1="9" y1="8" x2="15" y2="8"/>
                        <line x1="17" y1="16" x2="23" y2="16"/>
                    </svg>
                    Advanced
                </div>
                <div class="nav-item" data-view="settings">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6m5.196-15.804l-4.243 4.243m-5.906 5.906l-4.243 4.243M23 12h-6m-6 0H1m15.804-5.196l-4.243 4.243m-5.906 5.906l-4.243 4.243"/>
                    </svg>
                    Settings
                </div>
                <div class="sidebar-spacer"></div>
                <div class="nav-item" data-view="about">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right: 8px;">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                    About
                </div>
            </nav>

            <div class="content-area">
                <div class="view active" id="dashboard">
                    <h2 class="section-title" style="margin-top: 0;">Main</h2>
                    <p class="section-description">Configure your fishing macro keybinds and coordinates.</p>
                    
                    <div class="card" style="margin-top: 24px;">
                        <h4 style="color: #ffffff; margin: 0 0 20px 0; font-size: 16px; font-weight: 600;">Keybinds</h4>
                        
                        <div style="display: flex; gap: 40px; margin-bottom: 16px;">
                            <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                                <label style="color: #ffffff; font-size: 13px;">Rod Key</label>
                                <select id="rodHotkeySelect" onchange="updateRodHotkey()" style="width: 70px; padding: 6px 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #ffffff; font-size: 13px; appearance: auto; margin-left: auto;">
                                    <option value="1" selected>1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="0">0</option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                                <label style="color: #ffffff; font-size: 13px;">Start/Stop Keybind</label>
                                <input type="text" value="f1" readonly style="width: 70px; padding: 6px 10px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #ffffff; font-size: 12px; text-align: center; margin-left: auto; cursor: default;">
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 40px; margin-bottom: 16px;">
                            <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                                <label style="color: #ffffff; font-size: 13px;">Anything else Key</label>
                                <select id="anythingElseHotkeySelect" onchange="updateAnythingElseHotkey()" style="width: 70px; padding: 6px 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #ffffff; font-size: 13px; appearance: auto; margin-left: auto;">
                                    <option value="1">1</option>
                                    <option value="2" selected>2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="0">0</option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                                <label style="color: #ffffff; font-size: 13px;">Change Area</label>
                                <input type="text" value="f2" readonly style="width: 70px; padding: 6px 10px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #ffffff; font-size: 12px; text-align: center; margin-left: auto; cursor: default;">
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 40px; margin-bottom: 16px;">
                            <div style="display: flex; align-items: center; gap: 16px; flex: 1;">
                                <label style="color: #ffffff; font-size: 13px;">Devil Fruit Key</label>
                                <select id="devilFruitHotkeyDropdown" onchange="updateDevilFruitHotkey()" style="width: 70px; padding: 6px 10px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #ffffff; font-size: 13px; appearance: auto; margin-left: auto;">
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                    <option value="9">9</option>
                                    <option value="0">0</option>
                                </select>
                            </div>
                            <div style="flex: 1;"></div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 24px; padding: 0;">
                        <div class="location-content">
                            <div class="location-label">Water Point</div>
                            <div id="waterPointDisplay" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                            <button class="btn btn-configure" id="waterPointBtn" onclick="setWaterPoint()" style="padding: 4px 6px; font-size: 11px;">Set Point</button>
                        </div>
                        <p class="location-hint">Click the location in water where you want to cast your fishing rod</p>
                    </div>
                </div>

                <div class="view" id="fishing">
                    <h2 class="section-title" style="margin-top: 0;">Discord Webhook</h2>
                    <p class="section-description">Configure Discord webhook notifications for important events during fishing.</p>
                    
                    <div class="card" style="margin-top: 24px;">
                        <div style="margin-bottom: 16px;">
                            <label style="color: #ffffff; font-weight: 500; font-size: 13px; display: block; margin-bottom: 8px;">
                                Discord Webhook URL
                            </label>
                            <div style="position: relative;">
                                <input type="text" id="webhookUrlInput" 
                                       placeholder="https://discord.com/api/webhooks/..." 
                                       style="width: 100%; padding: 6px 10px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #ffffff; font-size: 13px; font-family: 'Consolas', 'Courier New', monospace; transition: all 0.2s ease;"
                                       onfocus="this.style.borderColor='rgba(255,255,255,0.2)'; this.style.background='rgba(255,255,255,0.05)'"
                                       onblur="this.style.borderColor='rgba(255,255,255,0.1)'; this.style.background='rgba(255,255,255,0.03)'">
                            </div>
                            <p style="color: #6F6F72; font-size: 11px; margin-top: 6px; line-height: 1.4;">
                                To get your webhook: Discord → Server Settings → Integrations → Webhooks → Copy URL
                            </p>
                        </div>
                        <div style="margin-bottom: 16px;">
                            <label style="color: #ffffff; font-weight: 500; font-size: 13px; display: block; margin-bottom: 8px;">
                                Discord User ID (for pings)
                            </label>
                            <div style="position: relative;">
                                <input type="text" id="discordUserIdInput" 
                                       placeholder="123456789012345678" 
                                       style="width: 100%; padding: 6px 10px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #ffffff; font-size: 13px; font-family: 'Consolas', 'Courier New', monospace; transition: all 0.2s ease;"
                                       onfocus="this.style.borderColor='rgba(255,255,255,0.2)'; this.style.background='rgba(255,255,255,0.05)'"
                                       onblur="this.style.borderColor='rgba(255,255,255,0.1)'; this.style.background='rgba(255,255,255,0.03)'">
                            </div>
                            <p style="color: #6F6F72; font-size: 11px; margin-top: 6px; line-height: 1.4;">
                                Right-click your profile → Copy User ID (enable Developer Mode in Settings first)
                            </p>
                        </div>
                        <div style="display: flex; gap: 10px; margin-bottom: 16px;">
                            <button class="btn btn-configure" onclick="saveWebhookSettings()">
                                Save Settings
                            </button>
                            <button class="btn btn-configure" onclick="testWebhook()">
                                Test Connection
                            </button>
                        </div>
                        
                        <div style="padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                            <p style="color: #ffffff; font-size: 14px; margin-bottom: 10px; font-weight: 500;">Notification Options:</p>
                            <div class="toggle-container" style="margin-bottom: 10px;">
                                <label class="toggle-label">Devil Fruit Caught</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="webhookDevilFruitToggle" checked onchange="toggleWebhookOption('devil_fruit')">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="toggle-container" style="margin-bottom: 10px;">
                                <label class="toggle-label">Bait Purchased</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="webhookPurchaseToggle" checked onchange="toggleWebhookOption('purchase')">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="toggle-container" style="margin-bottom: 10px;">
                                <label class="toggle-label">Watchdog Recovery</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="webhookRecoveryToggle" checked onchange="toggleWebhookOption('recovery')">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="view" id="controls">
                    <h2 class="section-title" style="margin-top: 0;">Controls</h2>
                    <p class="section-description">Configure automatic actions before starting your fishing macro.</p>
                    
                    <div class="card" style="margin-top: 24px;">
                        <div class="toggle-container">
                            <div>
                                <div class="toggle-label">Auto Buy Common Bait</div>
                                <div class="toggle-description">Automatically purchase common bait at configured intervals</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoBuyBaitToggle" onchange="toggleAutoBuyBait()">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div id="autoBuySection" style="display: none;">
                            <div class="hotkey-selector-group" style="padding: 14px 16px;">
                                <label>Loops Per Purchase</label>
                                <input type="number" id="loopsPerPurchaseInput" min="1" max="1000" value="100" onchange="updateLoopsPerPurchase()">
                            </div>
                            <div style="padding: 0 16px 14px 16px;">
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">
                                    <div>
                                        <div style="font-size: 11px; color: #888; margin-bottom: 3px; font-weight: 500;">Left Point</div>
                                        <div id="leftPointDisplay" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                        <button class="btn btn-configure" onclick="setLeftPoint()" style="width: 100%; padding: 4px 6px; font-size: 11px;">Set Point</button>
                                    </div>
                                    <div>
                                        <div style="font-size: 11px; color: #888; margin-bottom: 3px; font-weight: 500;">Middle Point</div>
                                        <div id="middlePointDisplay" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                        <button class="btn btn-configure" onclick="setMiddlePoint()" style="width: 100%; padding: 4px 6px; font-size: 11px;">Set Point</button>
                                    </div>
                                    <div>
                                        <div style="font-size: 11px; color: #888; margin-bottom: 3px; font-weight: 500;">Right Point</div>
                                        <div id="rightPointDisplay" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                        <button class="btn btn-configure" onclick="setRightPoint()" style="width: 100%; padding: 4px 6px; font-size: 11px;">Set Point</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 24px;">
                        <div class="toggle-container">
                            <div>
                                <div class="toggle-label">Auto Craft Bait</div>
                                <div class="toggle-description">Automatically craft rare and legendary baits after each bait purchase</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoCraftBaitToggle" onchange="toggleAutoCraftBait()">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div id="autoCraftSection" style="display: none;">
                            <div style="display: flex; gap: 8px; margin-bottom: 12px; margin-top: 16px; align-items: center; flex-wrap: wrap; padding: 0 16px;">
                                <div style="display: flex; gap: 8px; align-items: center;">
                                    <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                                        <input type="checkbox" id="craftLegBaitToggle" onchange="toggleCraftLegBait()" style="width: 14px; height: 14px;">
                                        <span>Leg Bait</span>
                                    </label>
                                    <button class="btn btn-configure" id="legBaitSetPointBtn" onclick="setLegBaitPoint()" style="padding: 4px 8px; font-size: 11px;" disabled>Set Point</button>
                                    <span id="legBaitPointDisplay" style="font-size: 10px; color: #666; min-width: 70px;">Not Set</span>
                                    <label style="display: flex; align-items: center; gap: 4px; cursor: pointer; font-size: 13px;">
                                        <input type="checkbox" id="craftRareBaitToggle" onchange="toggleCraftRareBait()" style="width: 14px; height: 14px;">
                                        <span>Rare Bait</span>
                                    </label>
                                    <button class="btn btn-configure" id="rareBaitSetPointBtn" onclick="setRareBaitPoint()" style="padding: 4px 8px; font-size: 11px;" disabled>Set Point</button>
                                    <span id="rareBaitPointDisplay" style="font-size: 10px; color: #666; min-width: 70px;">Not Set</span>
                                </div>
                            </div>
                            
                            <div style="padding: 0 16px 14px 16px;">
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                                    <div>
                                        <div style="font-size: 11px; color: #888; margin-bottom: 3px; font-weight: 500;">+ Button</div>
                                        <div id="craftPoint1Display" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                        <button class="btn btn-configure" onclick="setCraftPoint1()" style="width: 100%; padding: 4px 6px; font-size: 11px;">Set Point</button>
                                    </div>
                                    <div>
                                        <div style="font-size: 11px; color: #888; margin-bottom: 3px; font-weight: 500;">Fish Button</div>
                                        <div id="craftPoint2Display" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                        <button class="btn btn-configure" onclick="setCraftPoint2()" style="width: 100%; padding: 4px 6px; font-size: 11px;">Set Point</button>
                                    </div>
                                    <div>
                                        <div style="font-size: 11px; color: #888; margin-bottom: 3px; font-weight: 500;">Craft Button</div>
                                        <div id="craftPoint3Display" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                        <button class="btn btn-configure" onclick="setCraftPoint3()" style="width: 100%; padding: 4px 6px; font-size: 11px;">Set Point</button>
                                    </div>
                                    <div>
                                        <div style="font-size: 11px; color: #888; margin-bottom: 3px; font-weight: 500;">Exit Button</div>
                                        <div id="craftPoint4Display" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                        <button class="btn btn-configure" onclick="setCraftPoint4()" style="width: 100%; padding: 4px 6px; font-size: 11px;">Set Point</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 24px;">
                        <div class="toggle-container">
                            <div>
                                <div class="toggle-label">Auto Select Top Bait</div>
                                <div class="toggle-description">Automatically select the top bait</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoSelectBaitToggle" onchange="toggleAutoSelectBait()">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div id="autoSelectSection" style="display: none;">
                            <div class="location-config">
                                <div class="location-content">
                                    <div class="location-label">Bait Point</div>
                                    <div id="baitPointDisplay" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                    <button class="btn btn-configure" onclick="setBaitPoint()" style="padding: 4px 6px; font-size: 11px;">Set Point</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 24px;">
                        <div class="toggle-container">
                            <div>
                                <div class="toggle-label">Auto Store Devil Fruit</div>
                                <div class="toggle-description">Automatically store devil fruits when detected</div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoStoreFruitToggle" onchange="toggleAutoStoreFruit()">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div id="autoStoreSection" style="display: none;">
                            <div class="location-config">
                                <div class="location-content">
                                    <div class="location-label">Store Fruit Point</div>
                                    <div id="storeFruitPointDisplay" style="font-size: 10px; color: #666; margin-bottom: 4px; min-height: 14px;">Not Set</div>
                                    <button class="btn btn-configure" onclick="setStoreFruitPoint()" style="padding: 4px 6px; font-size: 11px;">Set Point</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="view" id="advanced">
                    <div id="advancedWarning" style="display: none; position: fixed; top: 61px; left: 200px; right: 0; bottom: 0; background: #202020; z-index: 1000; padding: 20px 20px 40px 20px; text-align: center; overflow-y: auto; display: flex; flex-direction: column; justify-content: space-between;">
                        <div style="max-width: 500px; margin: 0 auto; flex: 0 0 auto;">
                            <div style="font-size: 48px; margin-bottom: 10px;">⚠️</div>
                            <h2 style="color: #fbbf24; margin: 0 0 8px 0; font-size: 22px;">Warning</h2>
                            <h3 style="color: #fff; margin: 0 0 15px 0; font-size: 15px;">Do you know what you are doing?</h3>
                            <p style="color: #fff; font-size: 12px; line-height: 1.4; margin-bottom: 10px;">
                                Advanced settings are extremely powerful, being that they are intended to only be used by experienced users. While they can be very useful, manually configuring them can cause serious issues with stability and functionality. Do NOT change these settings if you are unsure of what you are doing.
                            </p>
                            <p style="color: #fff; font-size: 12px; line-height: 1.4; margin-bottom: 0;">
                                Do NOT modify timing values randomly hoping to improve performance. They are carefully calibrated and changing them will cause problems for you since you will not be fully aware of what they are affecting. If you were about to do that: GO BACK.
                            </p>
                        </div>
                        <div style="max-width: 500px; margin: 0 auto; padding-top: 40px; flex: 0 0 auto;">
                            <div style="display: flex; gap: 12px; justify-content: center;">
                                <button class="btn btn-secondary" onclick="closeAdvancedWarning()">Go back</button>
                                <button class="btn btn-danger" id="advancedProceedBtn" onclick="proceedToAdvanced()" disabled style="opacity: 0.5; cursor: not-allowed;">I know what I'm doing (<span id="advancedCountdown">5</span>)</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="resetConfirmation" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(32, 32, 32, 0); z-index: 1001; transition: background 0.3s ease; align-items: center; justify-content: center; overflow: hidden;">
                        <div id="resetDialog" style="max-width: 380px; background: #2a2a2a; border-radius: 8px; padding: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.6); opacity: 0; transform: translateY(-20px) scale(0.95); transition: all 0.3s ease;">
                            <div style="font-size: 42px; margin-bottom: 12px; text-align: center;">⚠️</div>
                            <h2 style="color: #fbbf24; margin: 0 0 8px 0; font-size: 18px; text-align: center;">Reset Advanced Settings?</h2>
                            <p style="color: #bbb; font-size: 12px; line-height: 1.5; margin-bottom: 16px; text-align: center;">
                                This will reset timing and control settings:
                            </p>
                            <ul style="color: #999; font-size: 11px; line-height: 1.6; margin: 0 0 16px 20px; padding: 0;">
                                <li>PD Controller values</li>
                                <li>All timing delays</li>
                                <li>Navigation path settings</li>
                                <li>Loop intervals</li>
                            </ul>
                            <p style="color: #ef4444; font-size: 11px; line-height: 1.4; margin: 0 0 20px 0; text-align: center; font-weight: 600;">
                                This action cannot be undone!
                            </p>
                            <div style="display: flex; gap: 10px; justify-content: center;">
                                <button class="btn btn-secondary" onclick="closeResetConfirmation()" style="min-width: 90px; padding: 8px 14px; font-size: 12px;">Cancel</button>
                                <button class="btn btn-danger" onclick="confirmReset()" style="min-width: 90px; padding: 8px 14px; font-size: 12px;">Reset</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="advancedContent" style="padding-top: 0;">
                    <div class="card" style="border-radius: 8px; padding: 14px; margin-bottom: 16px;">
                        <h4 style="color: #ef4444; margin: 0 0 6px 0; font-size: 13px; font-weight: 600;">⚠️ Reset Advanced Settings</h4>
                        <p style="color: #888; font-size: 11px; margin: 0 0 10px 0; line-height: 1.4;">
                            Restore all timing delays and control parameters to defaults
                        </p>
                        <button class="btn btn-danger" onclick="showResetConfirmation()" style="width: 100%; font-size: 12px;">
                            Reset to Defaults
                        </button>
                    </div>
                    
                    <div class="card" style="margin-top: 16px;">
                        <h4 style="color: #ef4444; margin-top: 0; margin-bottom: 15px; font-size: 13px;">DON'T CHANGE IF YOU DON'T KNOW WHAT YOU'RE DOING</h4>
                        
                        <h4 style="color: #ffffff; margin-top: 16px; margin-bottom: 10px; font-size: 13px;">PD Controller</h4>
                        <div class="hotkey-selector-group">
                            <label>Kp (Proportional)</label>
                            <input type="number" id="kpInput" step="0.1" min="0" max="5" value="0.9" onchange="updatePDParams()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Kd (Derivative)</label>
                            <input type="number" id="kdInput" step="0.1" min="0" max="2" value="0.3" onchange="updatePDParams()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>PD Clamp</label>
                            <input type="number" id="pdClampInput" step="0.1" min="0.1" max="5" value="1.0" onchange="updatePDParams()">
                        </div>
                        
                        <h4 style="color: #ffffff; margin-top: 16px; margin-bottom: 10px; font-size: 13px;">Auto Buy Bait Delays</h4>
                        <div class="hotkey-selector-group">
                            <label>Press 'E' Delay (s)</label>
                            <input type="number" id="preCastEDelayInput" step="0.1" min="0" max="10" value="3.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Click Delay (s)</label>
                            <input type="number" id="preCastClickDelayInput" step="0.1" min="0" max="10" value="3.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Type Number Delay (s)</label>
                            <input type="number" id="preCastTypeDelayInput" step="0.1" min="0" max="10" value="3.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Anti-Detect Micro Delay (s)</label>
                            <input type="number" id="preCastAntiDetectDelayInput" step="0.01" min="0" max="1" value="0.05" onchange="updateAdvancedTiming()">
                        </div>

                        <h4 style="color: #ffffff; margin-top: 20px; margin-bottom: 10px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 13px;">Auto Select Bait Delays</h4>
                        <div class="hotkey-selector-group">
                            <label>Bait Click Delay (s)</label>
                            <input type="number" id="autoSelectBaitDelayInput" step="0.1" min="0" max="5" value="0.5" onchange="updateAdvancedTiming()">
                        </div>

                        <h4 style="color: #ffffff; margin-top: 20px; margin-bottom: 10px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 13px;">Auto Store Devil Fruit Delays</h4>
                        <div class="hotkey-selector-group">
                            <label>Hotkey Press Delay (s)</label>
                            <input type="number" id="storeFruitHotkeyDelayInput" step="0.1" min="0" max="5" value="1.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Click Store Point Delay (s)</label>
                            <input type="number" id="storeFruitClickDelayInput" step="0.1" min="0" max="5" value="2.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Shift Key Delay (s)</label>
                            <input type="number" id="storeFruitShiftDelayInput" step="0.1" min="0" max="5" value="0.5" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Backspace Delay (s)</label>
                            <input type="number" id="storeFruitBackspaceDelayInput" step="0.1" min="0" max="5" value="1.5" onchange="updateAdvancedTiming()">
                        </div>

                        <h4 style="color: #ffffff; margin-top: 20px; margin-bottom: 10px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 13px;">Auto Craft Bait Navigation Path</h4>
                        <div style="font-size: 11px; color: #888; margin-bottom: 12px; font-style: italic;">Configure your custom path to the crafting NPC using WASD keys</div>
                        <div class="hotkey-selector-group">
                            <label>Navigation Step 1 - Key</label>
                            <input type="text" id="craftNavKey1Input" maxlength="1" value="d" onchange="updateAdvancedTiming()" class="key-input">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Navigation Step 1 - Duration (s)</label>
                            <input type="number" id="craftNavDuration1Input" step="0.1" min="0" max="10" value="4.5" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Navigation Step 2 - Key</label>
                            <input type="text" id="craftNavKey2Input" maxlength="1" value="w" onchange="updateAdvancedTiming()" class="key-input">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Navigation Step 2 - Duration (s)</label>
                            <input type="number" id="craftNavDuration2Input" step="0.1" min="0" max="10" value="2.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Navigation Step 3 (Return) - Key</label>
                            <input type="text" id="craftNavKey3Input" maxlength="1" value="s" onchange="updateAdvancedTiming()" class="key-input">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Navigation Step 3 (Return) - Duration (s)</label>
                            <input type="number" id="craftNavDuration3Input" step="0.1" min="0" max="10" value="2.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Navigation Step 4 (Return) - Key</label>
                            <input type="text" id="craftNavKey4Input" maxlength="1" value="a" onchange="updateAdvancedTiming()" class="key-input">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Navigation Step 4 (Return) - Duration (s)</label>
                            <input type="number" id="craftNavDuration4Input" step="0.1" min="0" max="10" value="4.5" onchange="updateAdvancedTiming()">
                        </div>
                        
                        <h4 style="color: #ffffff; margin-top: 20px; margin-bottom: 10px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 13px;">Auto Craft Bait Other Timing</h4>
                        <div class="hotkey-selector-group">
                            <label>Navigation Wait Delay (s)</label>
                            <input type="number" id="craftNavWaitDelayInput" step="0.1" min="0" max="5" value="1.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>'T' Press Delay (s)</label>
                            <input type="number" id="craftTPressDelayInput" step="0.1" min="0" max="5" value="1.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Click Delay (s)</label>
                            <input type="number" id="craftClickDelayInput" step="0.1" min="0" max="5" value="1.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>+/Fish Button Delay (s)</label>
                            <input type="number" id="craftButtonDelayInput" step="0.1" min="0" max="5" value="0.5" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Craft Button Delay (s)</label>
                            <input type="number" id="craftCraftButtonDelayInput" step="0.1" min="0" max="1" value="0.5" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Sequence Delay (s)</label>
                            <input type="number" id="craftSequenceDelayInput" step="0.1" min="0" max="5" value="0.3" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Exit Button Delay (s)</label>
                            <input type="number" id="craftExitDelayInput" step="0.1" min="0" max="5" value="0.5" onchange="updateAdvancedTiming()">
                        </div>

                        <h4 style="color: #ffffff; margin-top: 20px; margin-bottom: 10px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 13px;">Fishing Loop Delays</h4>
                        <div class="hotkey-selector-group">
                            <label>Cast Hold Duration (s)</label>
                            <input type="number" id="castHoldInput" step="0.1" min="0.1" max="10" value="1.0" onchange="updateCastTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Recast Timeout (s)</label>
                            <input type="number" id="recastTimeoutInput" step="1" min="1" max="120" value="30" onchange="updateCastTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Fish End Delay (s)</label>
                            <input type="number" id="fishEndDelayInput" step="0.1" min="0" max="10" value="2.0" onchange="updateFishTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Rod Selection Delay (s)</label>
                            <input type="number" id="rodSelectDelayInput" step="0.1" min="0" max="5" value="0.5" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Cursor Anti-Detect Delay (s)</label>
                            <input type="number" id="cursorAntiDetectDelayInput" step="0.01" min="0" max="1" value="0.05" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Color Scan Loop Delay (s)</label>
                            <input type="number" id="scanLoopDelayInput" step="0.01" min="0" max="1" value="0.1" onchange="updateAdvancedTiming()">
                        </div>

                        <h4 style="color: #ffffff; margin-top: 20px; margin-bottom: 10px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); font-size: 13px;">PD Control Advanced</h4>
                        <div class="hotkey-selector-group">
                            <label>Approaching Damping Multiplier</label>
                            <input type="number" id="pdApproachingDampingInput" step="0.1" min="0" max="10" value="2.0" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Chasing Damping Multiplier</label>
                            <input type="number" id="pdChasingDampingInput" step="0.1" min="0" max="10" value="0.5" onchange="updateAdvancedTiming()">
                        </div>
                        <div class="hotkey-selector-group">
                            <label>Gap Tolerance Multiplier</label>
                            <input type="number" id="gapToleranceMultiplierInput" step="0.1" min="0" max="10" value="2.0" onchange="updateAdvancedTiming()">
                        </div>
                    </div>
                    </div>
                </div>

                <div class="view" id="settings">
                    <h2 class="section-title" style="margin-top: 0;">Settings</h2>
                    <p class="section-description">Configure application preferences and behavior.</p>
                    
                    <div class="card" style="margin-top: 24px;">
                        <h4 style="color: #ffffff; margin: 0 0 8px 0; font-size: 16px; font-weight: 600;">Webhook Pings</h4>
                        <p style="color: #6F6F72; font-size: 13px; margin: 0 0 16px 0;">Enable or disable webhook pings</p>
                        
                        <label style="display: flex; align-items: center; pointer-events: none;">
                            <input type="checkbox" id="webhookPingsToggle" checked onchange="toggleWebhookPings()" style="width: 18px; height: 18px; margin-right: 10px; cursor: pointer; pointer-events: auto;">
                            <span style="color: #ffffff; font-size: 14px;">Enable webhook pings</span>
                        </label>
                    </div>
                    
                    <div class="card" style="margin-top: 16px;">
                        <h4 style="color: #ffffff; margin: 0 0 8px 0; font-size: 16px; font-weight: 600;">Window Behavior</h4>
                        <p style="color: #6F6F72; font-size: 13px; margin: 0 0 16px 0;">Window preferences for the app</p>
                        
                        <div style="margin-bottom: 12px;">
                            <label style="display: flex; align-items: center; pointer-events: none;">
                                <input type="checkbox" id="stayOnTopToggle" checked onchange="toggleStayOnTop()" style="width: 18px; height: 18px; margin-right: 10px; cursor: pointer; pointer-events: auto;">
                                <span style="color: #ffffff; font-size: 14px;">Stay On Top</span>
                            </label>
                            <p style="color: #6F6F72; font-size: 11px; margin: 4px 0 0 28px; line-height: 1.4;">Requires restart to apply</p>
                        </div>
                        
                        <label style="display: flex; align-items: center; pointer-events: none;">
                            <input type="checkbox" id="minimizeToggle" onchange="toggleMinimizeOnRun()" style="width: 18px; height: 18px; margin-right: 10px; cursor: pointer; pointer-events: auto;">
                            <span style="color: #ffffff; font-size: 14px;">Minimize when macro runs</span>
                        </label>
                    </div>
                </div>

                <div class="view" id="about">
                    <div class="about-section">
                        <h2 class="section-title">About Haiku Fishing</h2>
                        <p class="section-description" style="color: white;">Advanced fishing macro for Grand Piece Online.</p>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">Version</span>
                                <span class="info-value">2.0.1</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Created by</span>
                                <span class="info-value">Haiku</span>
                            </div>
                        </div>
                        <div style="margin-top: 24px; text-align: center;">
                            <a href="https://discord.gg/6bGw8HDuYV" target="_blank" style="display: inline-flex; align-items: center; justify-content: center; padding: 12px 24px; background: #5865F2; color: white; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 15px; transition: background 0.2s;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                                    <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                                </svg>
                                Join Our Discord
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script src="script.js?v=13"></script>
</body>
</html>
